<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.svg">
    <title>RIOT OS: Create Project</title>
    <!--BEGIN PROJECT_ICON-->
    <link rel="icon" href="$projecticon" type="image/x-icon" />
    <!--END PROJECT_ICON-->
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <!--BEGIN COPY_CLIPBOARD-->
    <script type="text/javascript" src="clipboard.js"></script>
    <!--END COPY_CLIPBOARD-->
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    $darkmode
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="global.css" rel="stylesheet" type="text/css"/>
    <!-- ... other metadata & script includes ... -->
    <script
      type="text/javascript"
      src="doxygen-awesome-paragraph-link.js"
    ></script>
      <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
    <!-- <link href="pagefind/pagefind-ui.css" rel="stylesheet"> -->
    <script src="pagefind/pagefind-ui.js"></script>
    <script>
      // Check whether the PagefindUI class is available
      if (typeof PagefindUI === "undefined") {
        console.warn("PagefindUI class is not available | Dev Build");
      } else {
        // // Remove the "searchstub" element and initialize the PagefindUI class
        // document.getElementById("#searchstub").remove();
        // Initialize the PagefindUI class with the element id "search"
        window.addEventListener("DOMContentLoaded", (event) => {
          new PagefindUI({
            element: "#pagefindsearch",
            showSubResults: true,
            showImages: false,
            resetStyles: false,
            mergeFilter: {
              "Information Source": "API Documentation",
            },
            mergeIndex: [{
              bundlePath: "https://riot.annsann.eu/pagefind",
              mergeFilter: {
                "Information Source": "Guides",
              }
          }], 
          });
        });
      }
    </script>
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  </head>
  <body>
    <div>
        <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
        <script type="text/javascript">
            DoxygenAwesomeDarkModeToggle.init()
        </script>
          <div id="titlearea">
            <table cellspacing="0" cellpadding="0">
              <tbody>
                <tr id="projectrow">
                  <td id="projectlogo">
                    <img alt="Logo" src="riot-logo.svg" $logosize />
                  </td>
                  <td id="projectalign">
                    <div id="projectname">
                      RIOT OS
                    </div>
                    <div id="projectbrief">The friendly OS for the IoT</div>
                  </td>
                </tr>
                <!--BEGIN FULL_SIDEBAR-->
                <tr>
                  <td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
                </tr>
                <!--END FULL_SIDEBAR-->
              </tbody>
            </table>
            <div
              id="searchbox"
              class="searchboxui"
            >
                <button
                id="enable-search-box"
                class="searchbutton"
                >
                <h3>üê∏üîé</h3>
                <h4>Search</h4>
              </button>
              <div id="pagefindsearch" class="hidden"></div>
            </div>
          </div>
        </div>
        <script>
          /* When the user clicks on the button, toggle between hiding and showing the search box content */
          document.getElementById("enable-search-box").addEventListener("click", function () {
            var searchbox = document.getElementById("pagefindsearch");
            if (searchbox.classList.contains("hidden")) {
              searchbox.classList.remove("hidden");
              /* Focus on the search input field (classname pagefind-ui__search-input) */
              searchbox.querySelector(".pagefind-ui__search-input").focus();
            } else {
              searchbox.classList.add("hidden");
            }
          });
        </script>
        <!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group____create__project.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Create Project<div class="ingroups"><a class="el" href="group__tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorials__c__basics.html">C Basics</a> &#124; <a class="el" href="group__tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorials__rust__basics.html">Rust Basics</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This tutorial will guide you through creating a new project with a simple hello world program. </p>
<h1><a class="anchor" id="step1"></a>
Step 1: Create a new project</h1>
<dl class="section note"><dt>Note</dt><dd>This tutorial assumes that you have already set up your development environment as described in the <a href="/getting-started/installing/">Getting Started</a> guide.</dd></dl>
<p>Now that we have played around with the examples and have a basic understanding of how to use RIOT, let's create a new project from scratch. We will create a simple hello world program that will print "Hello World!" to the console.</p>
<h2><a class="anchor" id="step1_step1"></a>
Create a new git repository</h2>
<p>We start by creating a new git repository for our project. If you have never worked with git before, you can find a good introduction <a href="https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control">here</a> or <a href="https://docs.github.com/en/get-started/getting-started-with-git/set-up-git">here</a>.</p>
<p>Let's create a new directory for our project in which we will store our code. We will call this directory <code>hello_world</code>.</p>
<div class="fragment"><div class="line">mkdir hello_world &amp;&amp; cd hello_world</div>
</div><!-- fragment --><p>Next, we initialize a new git repository in this directory. This will allow us to track changes to our code and collaborate with others and also allows us to easily get RIOT as a submodule.</p>
<div class="fragment"><div class="line">git init</div>
</div><!-- fragment --><div class="image">
<img src="01_empty_git.png" alt=""/>
<div class="caption">
The output of the git init command</div></div>
<p>Congratulations! You have now created a new empty git repository. In the next step, we will add RIOT as a submodule to our project.</p>
<h2><a class="anchor" id="step1_step2"></a>
Add RIOT as a submodule</h2>
<p>We want to import RIOT as a submodule to our project. This will allow us to easily update to newer versions of RIOT and also allows us to easily share our project with others on GitHub, Gitlab, or any other git hosting service.</p>
<p>To add RIOT as a submodule, we use the following command:</p>
<div class="fragment"><div class="line">git submodule add https://github.com/RIOT-OS/RIOT.git</div>
</div><!-- fragment --><div class="image">
<img src="02_riot_submodule.png" alt=""/>
<div class="caption">
Adding the submodule</div></div>
<p>When looking into our directory via <code>ls</code>, we can see that a new directory called <code>RIOT</code> has been created. This directory contains the RIOT source code. If you were to push your project to a git hosting service, the <code>RIOT</code> directory would not be included in the repository. Instead, the repository would contain a reference to the commit of the RIOT repository that you have added as a submodule. This way, the repository stays small and only contains the code that you have written and not the entire RIOT source code.</p>
<h1><a class="anchor" id="step2"></a>
Step 2: Creating our hello world program</h1>
<p>Now that we have added RIOT as a submodule to our project, we can start writing our hello world program. To do this, we create a new file called <code>main.c</code> in the <code>hello_world</code> directory. You can use any text editor to create this file. We will use Visual Studio Code in this example. To open Visual Studio Code in the directory, you can use the following command:</p>
<div class="fragment"><div class="line">code .</div>
</div><!-- fragment --><p>Now that Visual Studio Code is open, we create a new file called <code>main.c</code> and add the following code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="stdio_8h.html">stdio.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ztimer_8h.html">ztimer.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="group__sys__ztimer.html#gade98636e198f2d571c8acd861d29d360">ztimer_sleep</a>(<a class="code" href="group__sys__ztimer.html#ga538242d3a91b31e6282863b9663f8a03">ZTIMER_SEC</a>, 3);</div>
<div class="line"> </div>
<div class="line">  puts(<span class="stringliteral">&quot;Hello World!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__sys__ztimer_html_ga538242d3a91b31e6282863b9663f8a03"><div class="ttname"><a href="group__sys__ztimer.html#ga538242d3a91b31e6282863b9663f8a03">ZTIMER_SEC</a></div><div class="ttdeci">ztimer_clock_t *const ZTIMER_SEC</div><div class="ttdoc">Default ztimer second clock.</div></div>
<div class="ttc" id="agroup__sys__ztimer_html_gade98636e198f2d571c8acd861d29d360"><div class="ttname"><a href="group__sys__ztimer.html#gade98636e198f2d571c8acd861d29d360">ztimer_sleep</a></div><div class="ttdeci">void ztimer_sleep(ztimer_clock_t *clock, uint32_t duration)</div><div class="ttdoc">Put the calling thread to sleep for the specified number of ticks.</div></div>
<div class="ttc" id="astdio_8h_html"><div class="ttname"><a href="stdio_8h.html">stdio.h</a></div><div class="ttdoc">stdio wrapper to extend the C libs stdio</div></div>
<div class="ttc" id="aztimer_8h_html"><div class="ttname"><a href="ztimer_8h.html">ztimer.h</a></div><div class="ttdoc">ztimer API</div></div>
</div><!-- fragment --><div class="image">
<img src="03_main_c.png" alt=""/>
<div class="caption">
The hello world program in Visual Studio Code</div></div>
<p>This program will print "Hello World!" to the console after sleeping for 3 seconds. We use the <code>ztimer_sleep</code> function to sleep for 3 seconds otherwise we will most likely miss the output before connecting to our device. This function is part of the <code>ztimer</code> module, which is part of RIOT. The <code>puts</code> function is part of the standard C library and is used to print a string to the console.</p>
<h1><a class="anchor" id="step3"></a>
Step 3: Creating the Makefile</h1>
<p>Now that we have created our hello world program, we need to create a Makefile to build our program. The Makefile is a build automation tool that allows us to define how our program should be built. We create a new file called <code>Makefile</code> in the <code>hello_world</code> directory and add the following code:</p>
<div class="fragment"><div class="line"># name of your application</div>
<div class="line">APPLICATION = hello-world</div>
<div class="line"> </div>
<div class="line"># Change this to your board if you want to build for a different board</div>
<div class="line">BOARD ?= native</div>
<div class="line"> </div>
<div class="line"># This has to be the absolute path to the RIOT base directory:</div>
<div class="line">RIOTBASE ?= $(CURDIR)/RIOT</div>
<div class="line"> </div>
<div class="line"># Comment this out to disable code in RIOT that does safety checking</div>
<div class="line"># which is not needed in a production environment but helps in the</div>
<div class="line"># development process:</div>
<div class="line">DEVELHELP ?= 1</div>
<div class="line"> </div>
<div class="line"># This board requires a start sleep to actually catch the printed output</div>
<div class="line">USEMODULE += ztimer_sec</div>
<div class="line"> </div>
<div class="line"># Change this to 0 show compiler invocation lines by default:</div>
<div class="line">QUIET ?= 1</div>
<div class="line"> </div>
<div class="line">include $(RIOTBASE)/Makefile.include</div>
</div><!-- fragment --><div class="image">
<img src="04_makefile.png" alt=""/>
<div class="caption">
The Makefile in Visual Studio Code</div></div>
<p>Congratulations! You have now created a new project with a simple hello world program. In the next step, we will build and run our program just like we did in the "Getting Started" guide.</p>
<h1><a class="anchor" id="step4"></a>
Step 4: Building and running the program</h1>
<dl class="section note"><dt>Note</dt><dd>Do not be afraid to ask for help e.g. in <a href="https://forum.riot-os.org/">our forum</a> or <a href="https://matrix.to/#/#riot-os:matrix.org">Matrix chat</a>. We are happy to help you get started with RIOT, and we appreciate your feedback.</dd></dl>
<p>To build our program, we use the following command:</p>
<div class="fragment"><div class="line">BUILD_IN_DOCKER=1 make flash</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The <code>BUILD_IN_DOCKER=1</code> flag tells the build system to use the docker image provided by RIOT to build our program. This ensures that we have all the necessary dependencies to build our program. If you have already built RIOT on your system, you can omit this flag and the build system will use the toolchain installed on your system.</dd></dl>
<div class="image">
<img src="05_make.png" alt=""/>
<div class="caption">
Building the program</div></div>
<p>After building the program, we can run it using the following command to start the RIOT shell:</p>
<div class="fragment"><div class="line">make term</div>
</div><!-- fragment --><p>If everything went well, you should see our hello world program printing "Hello World!" to the console after 3 seconds.</p>
<div class="image">
<img src="06_output.png" alt=""/>
<div class="caption">
The hello world program running in the RIOT shell</div></div>
<p>Hooraay! You have successfully created a new project with a simple hello world program.</p>
<dl class="section note"><dt>Note</dt><dd>TiP: Before you push your project to a git hosting service such as Github, make sure to add a <code>.gitignore</code> file to your project to exclude unnecessary files from being tracked by git.</dd></dl>
<p>For this project, a <code>.gitignore</code> file could look like this:</p>
<div class="fragment"><div class="line"># Ignore build artifacts</div>
<div class="line">bin/</div>
<div class="line"> .bin</div>
<div class="line"> .elf</div>
<div class="line"> .hex</div>
<div class="line"> .map</div>
<div class="line"> .lst</div>
<div class="line"> .o</div>
<div class="line"> .d</div>
<div class="line"> .a</div>
<div class="line"> .out</div>
</div><!-- fragment --><h1><a class="anchor" id="conclusion"></a>
Conclusion</h1>
<p>In this tutorial, we have created a new project with a simple hello world program. We have added RIOT as a submodule to our project, created a hello world program, and built and run the program using the RIOT build system. You can now start building your own applications using RIOT and explore the vast possibilities that RIOT has to offer.</p>
<dl class="section note"><dt>Note</dt><dd>The source code for this tutorial can be found <a href="https://github.com/AnnsAnns/RIOT-Tutorial-Repository/tree/01_hello_world">HERE</a>.</dd></dl>
<p>If your project is not working as expected, you can compare your code with the code in this repository to see if you missed anything.</p>
<h1><a class="anchor" id="step1"></a>
Step 1: Create a new project</h1>
<dl class="section note"><dt>Note</dt><dd>This tutorial assumes that you have already set up your development environment as described in the <a href="/getting-started/installing/">Getting Started</a> guide.</dd></dl>
<p>Now that we have played around with the examples and have a basic understanding of how to use RIOT, let's create a new project from scratch. We will create a simple hello world program that will print "Hello World!" to the console.</p>
<h2><a class="anchor" id="step1_step1"></a>
Create a new git repository</h2>
<p>We start by creating a new git repository for our project. If you have never worked with git before, you can find a good introduction <a href="https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control">here</a> or <a href="https://docs.github.com/en/get-started/getting-started-with-git/set-up-git">here</a>.</p>
<p>Let's create a new directory for our project in which we will store our code. We will call this directory <code>hello_world</code>.</p>
<div class="fragment"><div class="line">mkdir hello_world &amp;&amp; cd hello_world</div>
</div><!-- fragment --><p>Next, we initialize a new git repository in this directory. This will allow us to track changes to our code and collaborate with others and also allows us to easily get RIOT as a submodule.</p>
<div class="fragment"><div class="line">git init</div>
</div><!-- fragment --><div class="image">
<img src="01_empty_git.png" alt=""/>
<div class="caption">
The output of the git init command</div></div>
<p>Congratulations! You have now created a new empty git repository. In the next step, we will add RIOT as a submodule to our project.</p>
<h2><a class="anchor" id="step1_step2"></a>
Add RIOT as a submodule</h2>
<p>We want to import RIOT as a submodule to our project. This will allow us to easily update to newer versions of RIOT and also allows us to easily share our project with others on GitHub, Gitlab, or any other git hosting service.</p>
<p>To add RIOT as a submodule, we use the following command:</p>
<div class="fragment"><div class="line">git submodule add https://github.com/RIOT-OS/RIOT.git</div>
</div><!-- fragment --><div class="image">
<img src="02_riot_submodule.png" alt=""/>
<div class="caption">
Adding the submodule</div></div>
<p>When looking into our directory via <code>ls</code>, we can see that a new directory called <code>RIOT</code> has been created. This directory contains the RIOT source code. If you were to push your project to a git hosting service, the <code>RIOT</code> directory would not be included in the repository. Instead, the repository would contain a reference to the commit of the RIOT repository that you have added as a submodule. This way, the repository stays small and only contains the code that you have written and not the entire RIOT source code.</p>
<h2><a class="anchor" id="open_vs_code"></a>
Open VS Code</h2>
<p>Now that we have added RIOT as a submodule to our project, we can start writing our hello world program. You can use any text editor to create this file. We will use Visual Studio Code in this example. To open Visual Studio Code in the directory, you can use the following command:</p>
<div class="fragment"><div class="line">code .</div>
</div><!-- fragment --><h1><a class="anchor" id="step_2_initialize_rust"></a>
Step 2: Initialize Rust</h1>
<p>Now that Visual Studio Code is open, we need to tell Rust what kind of project we want to create. We do this by running the following command in the terminal:</p>
<div class="fragment"><div class="line">cargo new hello_world --lib</div>
</div><!-- fragment --><p>This command creates a new project called <code>hello_world</code> with a library crate type. The <code>--lib</code> flag tells Rust that we want to create a library crate instead of a binary crate. A library crate is a collection of functions and types that can be used by other programs, while a binary crate is an executable program. RIOT then calls our <code>main</code> function when the program starts.</p>
<p>You should now have 3 new files within your project directory:</p>
<ul>
<li><code>Cargo.toml</code>: This file contains metadata about your project and its dependencies.</li>
<li><code>src/lib.rs</code>: This file contains the source code for your library crate.</li>
<li><code>Cargo.lock</code>: This file contains information about the exact versions of your dependencies.<ul>
<li>This file is automatically generated by Cargo and should not be edited manually so don't worry about it for now.</li>
</ul>
</li>
</ul>
<div class="image">
<img src="create_project/01_project_structure.png" alt=""/>
<div class="caption">
The project structure</div></div>
<h1><a class="anchor" id="step_3_creating_makefile"></a>
Step 3: Creating the Makefile</h1>
<p>Now that we have created our hello world program, we need to create a Makefile to build our program. The Makefile is a build automation tool that allows us to define how our program should be built. We create a new file called <code>Makefile</code> in the root directory of our project and add the following code:</p>
<div class="fragment"><div class="line"># name of your application</div>
<div class="line">APPLICATION = hello-world</div>
<div class="line"> </div>
<div class="line"># If no BOARD is found in the environment, use this default:</div>
<div class="line">BOARD ?= native</div>
<div class="line"> </div>
<div class="line"># Build in Docker by default (set to 0 to build locally)</div>
<div class="line">BUILD_IN_DOCKER ?= 1</div>
<div class="line"> </div>
<div class="line"># This has to be the absolute path to the RIOT base directory:</div>
<div class="line">RIOTBASE ?= $(CURDIR)/RIOT</div>
<div class="line"> </div>
<div class="line"># Comment this out to disable code in RIOT that does safety checking</div>
<div class="line"># which is not needed in a production environment but helps in the</div>
<div class="line"># development process:</div>
<div class="line">DEVELHELP ?= 1</div>
<div class="line"> </div>
<div class="line"># Change this to 0 show compiler invocation lines by default:</div>
<div class="line">QUIET ?= 1</div>
<div class="line"> </div>
<div class="line"># Tell the build system to use the Rust crate here</div>
<div class="line">FEATURES_REQUIRED += rust_target</div>
<div class="line"># Make sure this matches the name of the Rust crate</div>
<div class="line">APPLICATION_RUST_MODULE = hello_world</div>
<div class="line">BASELIBS += $(APPLICATION_RUST_MODULE).module</div>
<div class="line"> </div>
<div class="line">include $(RIOTBASE)/Makefile.include</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The <code>BUILD_IN_DOCKER=1</code> flag tells the build system to use the docker image provided by RIOT to build our program. This ensures that we have all the necessary dependencies to build our program. If you have already built RIOT on your system, you can omit this flag and the build system will use the toolchain installed on your system.</dd></dl>
<p>Now RIOT knows that you want to build a Rust application and will use the <code>hello_world</code> crate as the main module.</p>
<div class="image">
<img src="create_project/02_makefile.png" alt=""/>
<div class="caption">
The Makefile in Visual Studio Code</div></div>
<h1><a class="anchor" id="step_3_adjusting_cargo_toml"></a>
Step 3: Adjusting the Cargo.toml</h1>
<p>Next, we need to adjust the <code>Cargo.toml</code> file to tell Cargo that we want to build for RIOT. Open the <code>Cargo.toml</code> file and replace its contents with the following:</p>
<div class="fragment"><div class="line">[package]</div>
<div class="line">name = &quot;hello-world&quot;</div>
<div class="line">version = &quot;0.1.0&quot;</div>
<div class="line">edition = &quot;2021&quot;</div>
<div class="line"> </div>
<div class="line">[lib]</div>
<div class="line">crate-type = [&quot;staticlib&quot;]</div>
<div class="line"> </div>
<div class="line">[profile.release]</div>
<div class="line"># Setting the panic mode has little effect on the built code (as Rust on RIOT</div>
<div class="line"># supports no unwinding), but setting it allows builds on native without using</div>
<div class="line"># the nightly-only lang_items feature.</div>
<div class="line">panic = &quot;abort&quot;</div>
<div class="line"> </div>
<div class="line">[dependencies]</div>
<div class="line">riot-wrappers = { version = &quot;0.9.1&quot;, features = [ &quot;set_panic_handler&quot;, &quot;panic_handler_format&quot; ] }</div>
<div class="line"> </div>
<div class="line">rust_riotmodules = { path = &quot;./RIOT/sys/rust_riotmodules/&quot; }</div>
</div><!-- fragment --><p>The most important part here are the dependencies. As mentioned in <a href="/rust_tutorials/rust_in_riot/">Rust in Riot</a>, <code>riot-wrappers</code> is a crate that provides a set of wrappers around RIOT's C functions to make them usable from Rust in a safe way.</p>
<p>The other configuration options are not that important for now, but you can read more about them in the <a href="https://doc.rust-lang.org/cargo/reference/manifest.html">Cargo documentation</a>.</p>
<h1><a class="anchor" id="ide_setup"></a>
IDE / editor setup</h1>
<p>Due to the way the RIOT Rust integration works, you need to amend your normal Rust setup in your IDE to make it work with RIOT. Luckily RIOT provides a small makefile command that will help you with that. Run the following command in your terminal:</p>
<div class="fragment"><div class="line">make info-rust</div>
</div><!-- fragment --><p>The output will look something like this:</p>
<div class="fragment"><div class="line">[ann@ann-laptop13 rust01-hello-world]$ make info-rust</div>
<div class="line">cargo version</div>
<div class="line">cargo 1.81.0 (2dbb1af80 2024-08-20)</div>
<div class="line">c2rust --version</div>
<div class="line">C2Rust 0.19.0</div>
<div class="line">To use this setup of Rust in an IDE, add these command line arguments to the `cargo check` or `rust-analyzer`:</div>
<div class="line">    --profile release</div>
<div class="line">and export these environment variables:</div>
<div class="line">    CARGO_BUILD_TARGET=&quot;thumbv7em-none-eabihf&quot;</div>
<div class="line">    RIOT_COMPILE_COMMANDS_JSON=&quot;/home/ann/projects/exercises/rust01-hello-world/bin/feather-nrf52840-sense/cargo-compile-commands.json&quot;</div>
<div class="line">    RIOTBUILD_CONFIG_HEADER_C=&quot;/home/ann/projects/exercises/rust01-hello-world/bin/feather-nrf52840-sense/riotbuild/riotbuild.h&quot;</div>
<div class="line">You can also call cargo related commands with `make cargo-command CARGO_COMMAND=&quot;cargo check&quot;`.</div>
<div class="line">Beware that the way command line arguments are passed in is not consistent across cargo commands, so adding `--profile release` or other flags from above as part of CARGO_COMMAND may be necessary.</div>
</div><!-- fragment --><p>In VSCode you can now go to the workspace settings <code>.vscode/settings.json</code> and add the following settings:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;rust-analyzer.cargo.extraArgs&quot;: [</div>
<div class="line">        &quot;--profile&quot;,</div>
<div class="line">        &quot;release&quot;</div>
<div class="line">    ],</div>
<div class="line">    &quot;rust-analyzer.cargo.target&quot;: &quot;thumbv7em-none-eabihf&quot;,</div>
<div class="line">}</div>
</div><!-- fragment --><p>and export the environment variables in your preferred way. You can also use the <code>make cargo-command</code> command to run cargo commands with the correct arguments.</p>
<h1><a class="anchor" id="step_4_writing_hello_world"></a>
Step 4: Writing the Hello World Program</h1>
<p>We are nearly done with setting up our project. The last thing we need to do is to write the actual hello world program. Open the <code>src/lib.rs</code> file and replace its contents with the following code:</p>
<div class="fragment"><div class="line">#![no_std]</div>
<div class="line"> </div>
<div class="line">use riot_wrappers::riot_main;</div>
<div class="line">use riot_wrappers::println;</div>
<div class="line"> </div>
<div class="line">extern crate rust_riotmodules;</div>
</div><!-- fragment --><p><code>#![no_std]</code> tells the Rust compiler that we are building a program that does not depend on the standard library, which is not available on the hardware we are targeting. This does mean that we can't use some of the standard library features like <code>std::io</code> or <code>std::collections</code>, however, there are a lot of <code>no_std</code> compatible crates available that provide similar functionality, including <code>riot-wrappers</code> üòâ</p>
<p>After that we import the functions that we will soon use to print to the console. The <code>riot_main</code> macro helps RIOT figure out what our main function is and <code>println</code> is a macro that we can use to print to the console, this replaces the <code>println!</code> macro from the standard library, since, as mentioned before, we can't use it on embedded systems.</p>
<p>Now we need to actually write the <code>main</code> function. Add the following code to the <code>src/lib.rs</code> file:</p>
<div class="fragment"><div class="line">riot_main!(main);</div>
<div class="line"> </div>
<div class="line">fn main() {</div>
<div class="line">    println!(</div>
<div class="line">        &quot;You are running RIOT using Rust on a(n) {} board.&quot;,</div>
<div class="line">        riot_wrappers::BOARD</div>
<div class="line">    );</div>
<div class="line">}</div>
</div><!-- fragment --><div class="image">
<img src="create_project/03_lib.png" alt=""/>
<div class="caption">
The Full Code in VSCode</div></div>
<p>Congratulations! You have now created your first Rust program for RIOT. üéâ</p>
<h1><a class="anchor" id="step_5_building_program"></a>
Step 5: Building the Program</h1>
<p>To build our program, we use the following command:</p>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p>After building the program, we can run it using the following command to start the RIOT shell:</p>
<div class="fragment"><div class="line">make term</div>
</div><!-- fragment --><p>You should see the following output:</p>
<div class="fragment"><div class="line">You are running RIOT <span class="keyword">using</span> Rust on a(n) native board.</div>
</div><!-- fragment --><div class="image">
<img src="create_project/04_terminal_output.png" alt=""/>
<div class="caption">
The Output in the Terminal</div></div>
<h1><a class="anchor" id="conclusion"></a>
Conclusion</h1>
<p>In this tutorial, you have learned how to create a new Rust project for RIOT and how to build and run it. You have also learned how to write a simple hello world program in Rust and how to use the <code>riot-wrappers</code> crate to interact with RIOT's C functions.</p>
<dl class="section note"><dt>Note</dt><dd>The source code for this tutorial can be found <a href="https://github.com/AnnsAnns/RIOT-Tutorial-Repository/tree/01_rust_hello_world">HERE</a>.</dd></dl>
<p>If your project is not working as expected, you can compare your code with the code in this repository to see if you missed anything. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div>
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</div>
</body>
</html>
